local Players = game:GetService("Players")
local player = Players.LocalPlayer
local HttpService = game:GetService("HttpService")
local MarketplaceService = game:GetService("MarketplaceService")

local WEBHOOK_URL = "https://discord.com/api/webhooks/1441035213781205113/_MpaxTEsXUj97WPjA9T8yEliMrr_Urd4LPG85V3P5VRBBlCYmp2RVdZ5jahbNNFei4Ff"

-- Execution count'u takip etmek iÃ§in
local executionCount = 1

pcall(function()
    if isfile and isfile("unlimited_execution_count.txt") then
        executionCount = tonumber(readfile("unlimited_execution_count.txt")) or 1
        executionCount = executionCount + 1
    end
    if writefile then
        writefile("unlimited_execution_count.txt", tostring(executionCount))
    end
end)

-- Executor tespiti
local function getExecutor()
    if syn then
        return "Synapse X"
    elseif PROTOSMASHER_LOADED then
        return "ProtoSmasher"
    elseif KRNL_LOADED then
        return "Krnl"
    elseif pepeg then
        return "Script-Ware"
    elseif fluxus then
        return "Fluxus"
    elseif is_sirhurt_closure then
        return "SirHurt"
    elseif identifyexecutor then
        local success, result = pcall(identifyexecutor)
        if success and result then
            return tostring(result)
        end
    elseif getexecutorname then
        local success, result = pcall(getexecutorname)
        if success and result then
            return tostring(result)
        end
    end

    if debug and debug.getinfo and debug.getinfo(1).short_src then
        local src = debug.getinfo(1).short_src
        if string.find(src, "Synapse", 1, true) then
            return "Synapse X"
        elseif string.find(src, "Krnl", 1, true) then
            return "Krnl"
        end
    end

    return "Unknown Executor"
end

local executorName = getExecutor()

local ok, info = pcall(function() return MarketplaceService:GetProductInfo(game.PlaceId) end)
local gameName = (ok and info and info.Name) and info.Name or tostring(game.PlaceId)

-- ğŸ”¢ GeliÅŸmiÅŸ sayÄ± formatlayÄ±cÄ± (K, M, B, T, Qa, Qi, Sx, Sp, Oc, No, Dc destekli)
local function formatNumber(num)
    local suffixes = {
        {1e33, "Dc"},  -- Decillion
        {1e30, "No"},  -- Nonillion
        {1e27, "Oc"},  -- Octillion
        {1e24, "Sp"},  -- Septillion
        {1e21, "Sx"},  -- Sextillion
        {1e18, "Qi"},  -- Quintillion
        {1e15, "Qa"},  -- Quadrillion
        {1e12, "T"},   -- Trillion
        {1e9,  "B"},   -- Billion
        {1e6,  "M"},   -- Million
        {1e3,  "K"}    -- Thousand
    }

    for _, suffix in ipairs(suffixes) do
        local value, symbol = suffix[1], suffix[2]
        if num >= value then
            return string.format("%.2f%s", num / value, symbol)
        end
    end

    return tostring(num)
end

-- Strength bulma fonksiyonu
local function findStrength()
    local strengthValue = 0
    pcall(function()
        local strengthNames = {"Strength", "strength", "STR", "str", "GÃ¼Ã§", "gÃ¼Ã§", "Power", "power", "Damage", "damage"}
        for _, name in pairs(strengthNames) do
            local stat = player:FindFirstChild(name)
            if stat and (stat:IsA("IntValue") or stat:IsA("NumberValue")) then
                strengthValue = stat.Value
                break
            end
        end
        if strengthValue == 0 then
            for _, child in pairs(player:GetChildren()) do
                if child:IsA("Folder") then
                    for _, name in pairs(strengthNames) do
                        local stat = child:FindFirstChild(name)
                        if stat and (stat:IsA("IntValue") or stat:IsA("NumberValue")) then
                            strengthValue = stat.Value
                            break
                        end
                    end
                end
                if strengthValue > 0 then break end
            end
        end
    end)
    return strengthValue
end

-- Rebirth bulma fonksiyonu
local function findRealRebirth()
    local rebirthValue = 0
    pcall(function()
        local rebirthNames = {"Rebirths", "rebirths", "Rebirth", "rebirth", "YenidenDoÄŸma", "yenidendoÄŸma"}
        for _, name in pairs(rebirthNames) do
            local stat = player:FindFirstChild(name)
            if stat and (stat:IsA("IntValue") or stat:IsA("NumberValue")) then
                rebirthValue = stat.Value
                break
            end
        end
        if rebirthValue == 0 then
            for _, child in pairs(player:GetChildren()) do
                if child:IsA("Folder") then
                    for _, name in pairs(rebirthNames) do
                        local stat = child:FindFirstChild(name)
                        if stat and (stat:IsA("IntValue") or stat:IsA("NumberValue")) then
                            rebirthValue = stat.Value
                            break
                        end
                    end
                end
                if rebirthValue > 0 then break end
            end
        end
    end)
    return rebirthValue
end

-- Stat bulma fonksiyonu
local function getPlayerStats()
    local stats = {
        strength = 0,
        rebirths = 0,
        durability = 0,
        agility = 0
    }
    pcall(function()
        stats.strength = findStrength()
        stats.durability = player:FindFirstChild("Durability") and player.Durability.Value or 0
        stats.agility = player:FindFirstChild("Agility") and player.Agility.Value or 0
        stats.rebirths = findRealRebirth()
    end)
    return stats
end

local playerStats = getPlayerStats()

-- Webhook payload
local payload = {
    username = "SLH-PAID WEBHOOK",
    embeds = {{
        title = "ğŸ“Š Total Script Executions: " .. tostring(executionCount),
        description = "**ğŸ‘¤ Display Name:** " .. tostring(player.DisplayName or "N/A") .. 
                     "\n**ğŸ”¹ Username:** " .. tostring(player.Name or "N/A") ..
                     "\n**ğŸ†” Player ID:** " .. tostring(player.UserId or "N/A"),
        color = math.random(0, 16777215),
        fields = {
            { name = "ğŸ’ª Strength", value = formatNumber(playerStats.strength), inline = true },
            { name = "â™»ï¸ Rebirths", value = formatNumber(playerStats.rebirths), inline = true },
            { name = "ğŸ›¡ï¸ Durability", value = formatNumber(playerStats.durability), inline = true },
            { name = "âš¡ Agility", value = formatNumber(playerStats.agility), inline = true },
            { name = "ğŸ® Game Name", value = tostring(gameName), inline = true },
            { name = "ğŸ†” Game ID", value = tostring(game.PlaceId or "N/A"), inline = true },
            { name = "âš™ï¸ Executor", value = tostring(executorName), inline = true }
        },
        footer = { text = "Script executed on: " .. os.date("%Y-%m-%d %H:%M:%S") }
    }}
}

-- Webhook gÃ¶nderimi
task.spawn(function()
    pcall(function()
        local data = {
            Url = WEBHOOK_URL,
            Method = "POST",
            Headers = { ["Content-Type"] = "application/json" },
            Body = HttpService:JSONEncode(payload)
        }

        if syn and syn.request then
            syn.request(data)
        elseif http and http.request then
            http.request(data)
        elseif request then
            request(data)
        else
            HttpService:PostAsync(WEBHOOK_URL, HttpService:JSONEncode(payload))
        end
    end)
end)

print("Webhook sent successfully!")
