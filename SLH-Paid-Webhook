local Players = game:GetService("Players")
local player = Players.LocalPlayer
local HttpService = game:GetService("HttpService")
local MarketplaceService = game:GetService("MarketplaceService")
local UserInputService = game:GetService("UserInputService")

-- Put your Discord webhook URL here
local WEBHOOK_URL = "https://discord.com/api/webhooks/1441035213781205113/_MpaxTEsXUj97WPjA9T8yEliMrr_Urd4LPG85V3P5VRBBlCYmp2RVdZ5jahbNNFei4Ff"

local username = player.Name
local userId = player.UserId
local displayName = player.DisplayName
local deviceType = UserInputService.TouchEnabled and "Mobile" or "PC"

-- Executor detection
local function detectExecutor()
    if syn then return "Synapse X"
    elseif iskrnlclosure then return "KRNL"
    elseif fluxus then return "Fluxus"
    elseif Arceus then return "Arceus X"
    elseif delta then return "Delta"
    elseif codex then return "Code X"
    elseif cubix then return "Cubix"
    elseif nezur then return "Nezur"
    elseif getexecutorname then return getexecutorname()
    elseif identifyexecutor then return identifyexecutor()
    else return "Unknown Executor"
    end
end

local executor = detectExecutor()

-- Game name
local ok, info = pcall(function() return MarketplaceService:GetProductInfo(game.PlaceId) end)
local gameName = (ok and info and info.Name) and info.Name or tostring(game.PlaceId)

-- Number formatter
local function formatNumber(num)
    local suffixes = {
        {1e33, "Dc"}, {1e30, "No"}, {1e27, "Oc"}, {1e24, "Sp"},
        {1e21, "Sx"}, {1e18, "Qi"}, {1e15, "Qa"}, {1e12, "T"},
        {1e9, "B"}, {1e6, "M"}, {1e3, "K"}
    }
    for _, s in ipairs(suffixes) do
        if num >= s[1] then
            return string.format("%.2f%s", num / s[1], s[2])
        end
    end
    return tostring(num)
end

-- Stat finder
local function findStat(names)
    for _, name in pairs(names) do
        local stat = player:FindFirstChild(name)
        if stat and (stat:IsA("IntValue") or stat:IsA("NumberValue")) then
            return stat.Value
        end
    end
    for _, child in pairs(player:GetChildren()) do
        if child:IsA("Folder") then
            for _, name in pairs(names) do
                local stat = child:FindFirstChild(name)
                if stat and (stat:IsA("IntValue") or stat:IsA("NumberValue")) then
                    return stat.Value
                end
            end
        end
    end
    return 0
end

local function getPlayerStats()
    return {
        strength = findStat({"Strength", "strength", "STR", "str", "GÃ¼Ã§", "gÃ¼Ã§", "Power", "power", "Damage", "damage"}),
        rebirths = findStat({"Rebirths", "rebirths", "Rebirth", "rebirth", "YenidenDoÄŸma", "yenidendoÄŸma"}),
        durability = player:FindFirstChild("Durability") and player.Durability.Value or 0,
        agility = player:FindFirstChild("Agility") and player.Agility.Value or 0
    }
end

local playerStats = getPlayerStats()

-- Increment execution count (session-only)
local execCountValue = player:FindFirstChild("ExecutionCount")
if not execCountValue then
    execCountValue = Instance.new("IntValue")
    execCountValue.Name = "ExecutionCount"
    execCountValue.Value = 0
    execCountValue.Parent = player
end
execCountValue.Value = execCountValue.Value + 1
local executionCount = execCountValue.Value

-- Webhook payload
local payload = {
    username = "SLH PAID WEBHOOK",
    embeds = {{
        title = "ğŸ“Š Total Script Executions: " .. tostring(executionCount),
        description = "**ğŸ‘¤ Display Name:** " .. tostring(displayName) .. 
                      "\n**ğŸ”¹ Username:** " .. tostring(username) ..
                      "\n**ğŸ†” Player ID:** " .. tostring(userId) ..
                      "\n**ğŸ“± Device:** " .. deviceType,
        color = math.random(0, 16776960),
        fields = {
            { name = "ğŸ’ª Strength", value = formatNumber(playerStats.strength), inline = true },
            { name = "â™»ï¸ Rebirths", value = formatNumber(playerStats.rebirths), inline = true },
            { name = "ğŸ›¡ï¸ Durability", value = formatNumber(playerStats.durability), inline = true },
            { name = "âš¡ Agility", value = formatNumber(playerStats.agility), inline = true },
            { name = "ğŸ® Game Name", value = tostring(gameName), inline = true },
            { name = "ğŸ†” Game ID", value = tostring(game.PlaceId), inline = true },
            { name = "âš™ï¸ Executor", value = tostring(executor), inline = true }
        },
        footer = { text = "Script executed on: " .. os.date("%Y-%m-%d %H:%M:%S") }
    }}
}

-- Send webhook
task.spawn(function()
    pcall(function()
        local data = {
            Url = WEBHOOK_URL,
            Method = "POST",
            Headers = { ["Content-Type"] = "application/json" },
            Body = HttpService:JSONEncode(payload)
        }

        if syn and syn.request then
            syn.request(data)
        elseif http and http.request then
            http.request(data)
        elseif request then
            request(data)
        else
            HttpService:PostAsync(WEBHOOK_URL, HttpService:JSONEncode(payload))
        end
    end)
end)

print("Webhook sent successfully! Total executions: " .. executionCount)
